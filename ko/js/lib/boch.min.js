"use strict";
(function(_1){
var _2=_1,_3=[],_4=[],_5=[],_6=null,_7=true,_8=0,_9=[],_a=[],_b=[],_c=[];
var _d=function(){
_c["timeout"]=3000;
_c["retry"]=5;
_c["error_msg"]=false;
_c["error_log"]=true;
_c["interval_time"]=0;
_c["content-type"]="text/html;charset=euc-kr;";
};
_d.prototype={setBoch:function(_e,_f){
var _10=new Date().getTime();
try{
_11.each(_e,function(key,_12){
if(key!="indexOf"){
if(_13(_12.name)===undefined){
_9[_12.name]=0;
_b[_12.name]=false;
_14(_12);
}else{
_8++;
}
}
});
_15(_10,_11.length(_e),_f);
}
catch(e){
log("setBoch Error",e.message);
}
},boching:function(_16,_17){
_2.boch.name=_16;
var _18=_13(_16),_19=new Date().getTime(),_1a=null;
_17=(typeof _17=="undefined")?true:_17;
if(_17){
_11.clear();
}
try{
var _1b=_4[_16];
switch(_1b.toLowerCase()){
case "body":
document.body.innerHTML=_18;
break;
default:
var a=document.getElementById(_1b);
a.innerHTML=_18;
break;
}
_1a=new Date().getTime();
if(_5[_16]!==undefined){
_5[_16]();
}
if(_6!==null){
_6();
}
setTimeout(function(){
_1c();
},_c["interval_time"]);
log("boching Loaded, name is "+_16+" and time is",(_1a-_19)+" ms");
}
catch(e){
log("boching Error",e.message);
}
},setValue:function(id,obj){
_1d.call(_2,id,obj);
},setIterate:function(id,obj,_1e){
_1f.call(_2,id,obj,_1e);
},getQueue:function(_20){
var a=_13.call(_2,_20);
log(_20+" Queue is ",a);
},getAllQueue:function(){
var a=_21.call(_2);
log("AllQueue is ",a);
},delQueue:function(obj){
_11.each(obj,function(key,_22){
if(key!="indexOf"){
_23.call(_2,_22);
}
log("delQueue "+_22+" is ",_13.call(_2,_22));
});
},delAllQueue:function(){
_24.call(_2);
log("delAllQueue is ",_21.call(_2));
},setConfig:function(_25){
_11.each(_25,function(key,_26){
_c[key]=_26;
});
},getConfig:function(key){
log(key+" is",_c[key]);
return _c[key];
},getAllConfig:function(){
log(_c);
return _c;
},setBochingCallback:function(_27){
_6=_27;
},insertJS:function(url,_28){
var _29=document.getElementsByTagName("head")[0];
var _2a=document.createElement("script");
_2a.async=_28||true;
_2a.type="text/javascript";
_2a.src=url;
_29.appendChild(_2a);
},insertCSS:function(url,_2b){
var _2c=document.getElementsByTagName("head")[0];
var _2d=document.createElement("link");
_2d.async=_2b||true;
_2d.rel="stylesheet";
_2d.href=url;
_2c.appendChild(_2d);
}};
var _14=function(obj){
var xhr=null;
if(_2.XMLHttpRequest){
xhr=new _1.XMLHttpRequest();
}else{
if(_2.ActiveXObject){
xhr=new _1.ActiveXObject("Microsoft.XMLHTTP");
}
}
xhr.open("GET",obj.url,true);
xhr.setRequestHeader("Content-type",_c["content-type"]);
if(xhr.overrideMimeType){
xhr.overrideMimeType("Content-type",_c["content-type"]);
}
xhr.onreadystatechange=function(){
if(xhr.readyState==4){
switch(xhr.status){
case 200:
_8++;
_2f(obj,xhr.responseText);
break;
case 0:
_2e();
break;
default:
_a[obj.name]="Not Loaded "+xhr.status+", Please press F5 and retry";
_2f(obj,undefined);
if(xhr.status!=0){
_8++;
log("getHtml Error, name "+obj.name+" code is ",xhr.status);
}
break;
}
}
};
xhr.timeout=_c["timeout"];
xhr.send();
function _2e(){
_b[obj.name]=true;
if(_9[obj.name]==_c["retry"]){
_8++;
_a[obj.name]="Not Loaded Timeout, Please press F5 and retry";
log("getHtml Error, name "+obj.name+" timeout retry count end ",_9[obj.name]);
}else{
setTimeout(function(){
_14.call(_2,obj);
},_c["interval_time"]);
_9[obj.name]++;
_a[obj.name]="Not yet Loaded, Please wait a few second";
log("getHtml Error, name "+obj.name+" timeout retry is "+_9[obj.name]+" and url is ",obj.url);
}
_2f(obj,undefined);
};
},_2f=function(obj,_30){
try{
_3[obj.name]=_30;
_5[obj.name]=obj.callback;
_4[obj.name]=obj.inner_html||"body";
var el=document.getElementsByName(obj.name),_31=null;
if(_30==undefined||_30==""){
_7=false;
(_c["error_msg"])?_31=function(){
alert(_a[obj.name]);
}:_31="";
}else{
_31=_32;
}
for(var i=0,j=el.length;i<j;i++){
el[i].onclick=_31;
}
}
catch(e){
log("setQueue Error, name is "+obj.name,e.message);
}
function _32(){
_33.boching(obj.name);
};
},_13=function(_34){
return _3[_34];
},_21=function(){
return _3;
},_23=function(_35){
delete _3[_35];
},_24=function(){
_3=[];
},_1c=function(){
_11.each(_3,function(_36){
try{
if(_36!="indexOf"){
var el=document.getElementsByName(_36),_37=null;
if(el!==null){
if(_13(_36)==undefined){
(_c["error_msg"])?_37=function(){
alert(_a[_36]);
}:_37="";
throw new Error("queue undefined");
}else{
_37=_38;
}
}
for(var i=0,j=el.length;i<j;i++){
el[i].onclick=_37;
}
}
}
catch(e){
log("allSetBoch Error, name is "+_36,e.message);
}
function _38(){
_33.boching(_36);
};
});
},_15=function(_39,_3a,_3b){
var _3c=false;
_3d();
if(!_3c){
var _3e=setInterval(_3d,_c["interval_time"]);
}
function _3d(){
if(parseInt(_8)===parseInt(_3a)){
_3c=true;
_8=0;
clearInterval(_3e);
var _3f=new Date().getTime();
(_7)?log("setBoch Success, Complete time is",(_3f-_39)+" ms"):log("setBoch Not success, Complete time is",(_3f-_39)+" ms");
if(_3b!==undefined){
_3b();
}
_2.boch.setboch_all_inited=_7;
}
};
},_1d=function(id,obj){
var _40=document.getElementById(id);
if(_40!=null){
var _41=new Date().getTime(),_42=_40.getElementsByTagName("data"),_43=_40.getAttribute("data-setvalue")||_40.getAttribute("data-value"),_44=[],_45=_40.innerHTML,_46=[];
if(_43.toString()==="true"){
for(var _47 in obj){
_46[_47]=false;
for(var i=0,j=_42.length;i<j;i++){
var _48=_42[i].outerHTML.match(new RegExp("(data-\\w+)","gim"));
_44[_47]=_40.innerHTML.match(new RegExp("\\<data data-("+_47+"=)(.*?)\\>","gim"));
if(_48[0]=="data-"+_47){
_45=_45.replace(new RegExp("("+_44[_47][0]+")(.*?)\\</data>","gim"),obj[_47]);
_46[_47]=true;
}
}
}
_40.innerHTML=_45;
var _49=new Date().getTime();
log("setValue Complete, time is",(_49-_41)+" ms");
log(_46);
}
}
},_1f=function(id,obj,_4a){
var _4b=document.getElementById(id);
if(_4b!=null){
var _4c=new Date().getTime(),_4d=_4b.getAttribute("data-setiterate")||_4b.getAttribute("data-iterate"),_4e=[],_4f=[],_50=document.createElement("div");
if(_4d.toString()==="true"){
try{
for(var _51 in obj){
var _52=obj[_51],_53=_4b.cloneNode(true),_54=_4b.innerHTML,_55=_53.getElementsByTagName("data");
_4f[_51]=[];
for(var i=0,j=_55.length;i<j;i++){
var _56=_55[i].outerHTML.match(new RegExp("(data-\\w+)","gim"));
for(var _57 in _52){
_4e[_57]=_4b.innerHTML.match(new RegExp("\\<data data-("+_57+"=)(.*?)\\>","gim"));
if(_4f[_51][_57]!=true){
_4f[_51][_57]=false;
}
if(_56==("data-"+_57)){
_54=_54.replace(new RegExp("("+_4e[_57]+")(.*?)\\</data>","gim"),_52[_57]);
_4f[_51][_57]=true;
}
}
}
if(_51!="indexOf"){
var _58="bochlist_"+id+_51;
_53.setAttribute("id",_58);
_53.innerHTML=_54;
_50.appendChild(_53);
if(_4a!=undefined){
_4a(_58,_51);
}
}
}
_4b.innerHTML=_50.innerHTML;
var _59=new Date().getTime();
log(_4f);
log("setIterate Complete, time is",(_59-_4c)+" ms");
}
catch(e){
log("setIterate Error ",e);
}
}
}
};
var _11={each:function(_5a,_5b){
for(var i in _5a){
_5b.call(_5a[i],i,_5a[i]);
}
},log:function(){
if(_c["error_log"]){
if(_2.console&&!_11.isIe()){
if(arguments[0]===undefined){
console.log("%c variable is undefined! \n","font-weight:bold;color:purple");
return;
}else{
if(arguments[1]===undefined){
if(_11.isArray(arguments[0])||_11.isObject(arguments[0])){
_11.each(arguments[0],function(key,_5c){
log(key,_5c);
});
}else{
console.log("%c"+arguments[0]+" ","font-weight:bold;");
}
}else{
if(_11.isArray(arguments[1])||_11.isObject(arguments[1])){
console.log("%c"+arguments[0]+" ","font-weight:bold;",arguments[1]);
}else{
console.log("%c"+arguments[0]+" %c "+arguments[1],"font-weight:bold;","font-weight:bold;color:brown;");
}
}
}
}else{
(arguments[1]==undefined)?console.log(" "+arguments[0]):console.log(arguments[0]+"  "+arguments[1]);
}
}
},isInt:function(obj){
return (!isNaN(obj)&&parseInt(obj)==obj);
},isArray:function(obj){
return Object.prototype.toString.call(obj)==="[object Array]";
},isObject:function(obj){
return Object.prototype.toString.call(obj)==="[object Object]";
},isFunction:function(obj){
return Object.prototype.toString.call(obj)==="[object Function]";
},length:function(obj){
var _5d=0,i;
for(i in obj){
if(obj.hasOwnProperty(i)){
_5d++;
}
}
return _5d;
},clear:function(){
console.clear();
},isIe:function(){
if(_2.navigator.appName=="Microsoft Internet Explorer"||_2.navigator.userAgent.indexOf("Trident")>=0){
return true;
}else{
return false;
}
}};
var _33=_2.boch=new _d;
var log=_2.log=_11.log;
})(this);

